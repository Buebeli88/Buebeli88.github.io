<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Team Stats</title>
    <link rel="stylesheet" href="../../../css/layout.css" />
    <link rel="stylesheet" href="teamstats.css" />
    <link
      href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism-tomorrow.css"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/prism.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-markup.min.js"></script>
  </head>
  <body>
    <header class="header">
      <div class="left">
        <a class="header" href="../../../../index.html">
          <img
            src="../../../images/justlogo/Just IT-horizontal.png"
            alt="Just IT Logo"
            width="250"
            height="85"
            class="logo"
        /></a>
        <a class="header" href="../../../html/html/liste.html" class="liste"
          >Index</a
        >
        <a class="header" href="../jsübungen.html">Übungen</a>
      </div>
      <div class="right">
        <a class="header" href="" class="navlink">Profile</a>
        <a class="header" href="" class="navlink">Login</a>
      </div>
    </header>
    <div class="container">
      <main>
        <h1>Übung: Team Stats</h1>
        <div class="grid-container">
          <div class="column">
            <h2>Neuen Spieler hinzufügen</h2>
            <form id="playerForm" class="form">
              <input
                type="text"
                id="firstName"
                placeholder="Vorname"
                required
              />
              <input
                type="text"
                id="lastName"
                placeholder="Nachname"
                required
              />
              <input type="number" id="age" placeholder="Alter" required />
              <button type="submit">Spieler hinzufügen</button>
            </form>
            <h2>Team</h2>
            <div id="result" class="output-box"></div>
          </div>
          <div class="column">
            <h2>Neues Spiel hinzufügen</h2>
            <form id="gameForm" class="form">
              <input type="text" id="opponent" placeholder="Gegner" required />
              <input
                type="number"
                id="teamPoints"
                placeholder="Team Punkte"
                required
              />
              <input
                type="number"
                id="opponentPoints"
                placeholder="Gegner Punkte"
                required
              />
              <button type="submit">Spiel hinzufügen</button>
            </form>
            <h2>Spiele</h2>
            <div id="result1" class="output-box"></div>
          </div>
        </div>
        <p>
            <strong>JavaScript</strong>
        </p>
        <pre><code class="language-js">// Objekt "team" verwaltet Spieler- und Spiel-Daten
const team = {
  // Privates Array mit Spielern (Initialdaten)
  _players: [
    { firstName: "John", lastName: "Doe", age: 25 },
    { firstName: "Jane", lastName: "Smith", age: 28 },
    { firstName: "Mike", lastName: "Johnson", age: 22 },
  ],
  // Privates Array mit Spielen (Initialdaten)
  _games: [
    { opponent: "Tigers", teamPoints: 30, opponentPoints: 27 },
    { opponent: "Lions", teamPoints: 22, opponentPoints: 24 },
    { opponent: "Bears", teamPoints: 28, opponentPoints: 26 },
  ],

  // Getter für Spieler (ermöglicht Zugriff auf _players)
  get players() {
    return this._players;
  },

  // Getter für Spiele (ermöglicht Zugriff auf _games)
  get games() {
    return this._games;
  },

  // Methode zum Hinzufügen eines neuen Spielers zum Team
  addPlayer(newFirstName, newLastName, newAge) {
    const player = {
      firstName: newFirstName,
      lastName: newLastName,
      age: newAge,
    };
    this._players.push(player);
  },

  // Methode zum Hinzufügen eines neuen Spiels zur Spielhistorie
  addGame(newOpponent, newTeamPoints, newOpponentPoints) {
    const game = {
      opponent: newOpponent,
      teamPoints: newTeamPoints,
      opponentPoints: newOpponentPoints,
    };
    this._games.push(game);
  },
};

// Funktion zur Anzeige der Spieler und Spiele im HTML
function updateDisplay() {
  // Spieler-Daten in HTML-Absätze umwandeln
  const playersHTML = team.players
    .map((player) => {
      return `<p>${player.firstName} ${player.lastName}, Age: ${player.age}</p>`;
    })
    .join("");

  // Spiel-Daten in HTML-Absätze umwandeln
  const gamesHTML = team.games
    .map((game) => {
      return `<p>Opponent: ${game.opponent} — Team: ${game.teamPoints}, Opponent: ${game.opponentPoints}</p>`;
    })
    .join("");

  // HTML-Inhalt in entsprechende Container schreiben
  document.getElementById("result").innerHTML = playersHTML;
  document.getElementById("result1").innerHTML = gamesHTML;
}

// Initiale Anzeige der Daten beim Laden der Seite
updateDisplay();

// Event Listener für das Spieler-Formular (bei Absenden)
document.getElementById("playerForm").addEventListener("submit", function (e) {
  e.preventDefault(); // Verhindert das automatische Neuladen der Seite

  // Eingaben aus dem Formular auslesen und trimmen (Leerzeichen entfernen)
  const firstName = document.getElementById("firstName").value.trim();
  const lastName = document.getElementById("lastName").value.trim();
  const age = parseInt(document.getElementById("age").value);

  // Überprüfen, ob alle Felder korrekt ausgefüllt sind
  if (firstName && lastName && !isNaN(age)) {
    // Neuen Spieler hinzufügen
    team.addPlayer(firstName, lastName, age);
    // Anzeige aktualisieren
    updateDisplay();
    // Formular zurücksetzen
    this.reset();
  } else {
    // Fehlermeldung bei ungültigen Eingaben
    alert("Bitte alle Felder korrekt ausfüllen.");
  }
});

// Event Listener für das Spiel-Formular (bei Absenden)
document.getElementById("gameForm").addEventListener("submit", function (e) {
  e.preventDefault(); // Verhindert das automatische Neuladen der Seite

  // Eingaben aus dem Formular auslesen und trimmen
  const opponent = document.getElementById("opponent").value.trim();
  const teamPoints = parseInt(document.getElementById("teamPoints").value);
  const opponentPoints = parseInt(document.getElementById("opponentPoints").value);

  // Überprüfen, ob alle Felder korrekt ausgefüllt sind
  if (opponent && !isNaN(teamPoints) && !isNaN(opponentPoints)) {
    // Neues Spiel hinzufügen
    team.addGame(opponent, teamPoints, opponentPoints);
    // Anzeige aktualisieren
    updateDisplay();
    // Formular zurücksetzen
    this.reset();
  } else {
    // Fehlermeldung bei ungültigen Eingaben
    alert("Bitte alle Felder korrekt ausfüllen.");
  }
});
</code></pre>
      </main>
      <script src="teamstats.js"></script>
    </div>
    <footer>
      <p class="pfooter">Creator Steven Justice</p>
    </footer>
  </body>
</html>
